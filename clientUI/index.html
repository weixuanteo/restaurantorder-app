<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no">
    <title>Lestoran</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Bitter:400,700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:100,300,300i,400,400i,700">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Lato:300,400">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/Features-Clean.css">
    <link rel="stylesheet" href="assets/css/Header-Blue.css">
    <link rel="stylesheet" href="assets/css/Header-Dark.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.5.2/animate.min.css">
    <link rel="stylesheet" href="assets/css/Responsive-Client-One.css">
    <link rel="stylesheet" href="assets/css/styles.css">

    

    <!--Include vue-->
    <script src="https://cdn.jsdelivr.net/npm/vue@2/dist/vue.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.js"></script>   

</head>

<body>
    <header class="header-dark">
        <nav class="navbar navbar-dark navbar-expand-lg navigation-clean-search">
            <div class="container"><a class="navbar-brand" style="color: rgb(21,133,238);" href="#">Lestoran</a><button data-toggle="collapse" class="navbar-toggler" data-target="#navcol-1"><span class="sr-only">Toggle navigation</span><span class="navbar-toggler-icon"></span></button>
                <div class="collapse navbar-collapse" id="navcol-1" style="text-align: left;">
                    <ul class="navbar-nav ml-auto" style="/*margin: 0px;*/">
                        <li class="nav-item"></li>
                    </ul>

                    <div id='search'>

                        <form class="form-inline my-2 my-lg-0">
                            <input class="form-control mr-sm-2" type="search" placeholder="Search" aria-label="Search" v-model='search_term' v-on:keyup="queryDB">
                            <button class="btn btn-outline-success my-2 my-sm-0" type="submit" >Search</button>
                          </form>
<!-- 
                        <form class="form-inline" id="searchBox" target="_self">
                            <div class="form-group">
                                
                                    <input type="text" placeholder="Search.." name="search">
                                    <button type="submit"><i class="fa fa-search"></i></button>
                              
                                <input color='black' class="form-control search-field" id="search-field" name="search" placeholder="Search restaurant" v-model='search_term' v-on:keyup="queryDB">
                            </div>
                        </form> -->
                    </div>

                </div>
            </div>
        </nav>
    </header>

        <section class="features-clean">
            <div class="container">
                <div class="intro">
                    <h2 class="text-center">Restaurants Nearby</h2>
                    <p class="text-center"></p>
                </div>

                <div id='app'>
                    <div v-for="rest in restaurants">
                        
                        <div class="row features">
                            <div class="col-sm-6 col-lg-4 col-xl-9 offset-xl-2 item">
                                <i class="fa fa-smile-o icon"></i>
                                <h3 class="name" style="width: 24em;display: inline-block;">{{rest.name}}<br></h3>
                                <a v-if="rest.is_open" :href="'home.html?rest_id=' + rest.rest_id">
                                        <button class="btn btn-primary text-left" data-bss-hover-animate="flash" style="background: rgb(76,162,255);text-align: left;">
                                    <a href="home.html">Makan!</a>
                                    </button>
                                </a>
                                <button v-else class="btn btn-primary text-left" data-bss-hover-animate="flash" style="background: rgb(76,162,255);text-align: left;" disabled>Closed</button>
                                <p><strong>{{rest.address}}</strong></p>
                                <!-- <p class="description">Casual dining, Rice, Chicken, Alcohol, ...</p> -->
                            </div>
                        </div>

                    </div>
                </div>

            </div>
        </section>


    <script>
        new Vue({
            el: '#app',
            data: {
                restaurants: []
            },
            created: function() { 
                console.log('here')
                axios.get('http://localhost/restaurant')
                .then(response => {
                    all_restaurants = response.data.data.restaurants
                    for (restaurant of all_restaurants) {
                        console.log(restaurant)
                        this.restaurants.push(restaurant)
                    }
                })
                .catch(error => {
                    this.res = [{ entry: 'There was an error: ' + error.message }]
                })
            }
        })

        new Vue({
            el: '#search',
            data: {
                search_term: ""
            },
            methods: {
                queryDB : function(event){
                console.log('detected entered key',event.key)
                
                // get the restaurant list
                // filter loop list to get entered 

                // axios.get('http://localhost/restaurant')
                // .then(response => {
                //     all_restaurants = response.data.data.restaurants
                //     for (restaurant of all_restaurants) {
                //         console.log(restaurant)
                //         this.restaurants.push(restaurant)
                //     }
                // })
                // .catch(error => {
                //     this.res = [{ entry: 'There was an error: ' + error.message }]
                // })
            }
            }
        })
    </script>

<script src="assets/js/jquery.min.js"></script>
<script src="assets/bootstrap/js/bootstrap.min.js"></script>
<script src="assets/js/bs-init.js"></script>
</body>

</html>